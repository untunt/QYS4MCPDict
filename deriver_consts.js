const 廣韻韻目字to廣韻韻目 = Object.fromEntries([
  '上平聲1東 上聲1董 去聲1送 入聲1屋',
  '上平聲2冬 上聲2腫 去聲2宋 入聲2沃',
  '上平聲3鍾 上聲2腫 去聲3用 入聲3燭',
  '上平聲4江 上聲3講 去聲4絳 入聲4覺',
  '上平聲5支 上聲4紙 去聲5寘',
  '上平聲6脂 上聲5旨 去聲6至',
  '上平聲7之 上聲6止 去聲7志',
  '上平聲8微 上聲7尾 去聲8未',
  '上平聲9魚 上聲8語 去聲9御',
  '上平聲10虞 上聲9麌 去聲10遇',
  '上平聲11模 上聲10姥 去聲11暮',
  '上平聲12齊 上聲11薺 去聲12霽',
  '  去聲13祭',
  '  去聲14泰',
  '上平聲13佳 上聲12蟹 去聲15卦',
  '上平聲14皆 上聲13駭 去聲16怪',
  '  去聲17夬',
  '上平聲15灰 上聲14賄 去聲18隊',
  '上平聲16咍 上聲15海 去聲19代',
  '  去聲20廢',
  '上平聲17眞 上聲16軫 去聲21震 入聲5質',
  '上平聲18諄 上聲17準 去聲22稕 入聲6術',
  '上平聲19臻 上聲19隱 去聲21震 入聲7櫛',
  '上平聲20文 上聲18吻 去聲23問 入聲8物',
  '上平聲21欣 上聲19隱 去聲24焮 入聲9迄',
  '上平聲22元 上聲20阮 去聲25願 入聲10月',
  '上平聲23魂 上聲21混 去聲26慁 入聲11沒',
  '上平聲24痕 上聲22很 去聲27恨 入聲11沒',
  '上平聲25寒 上聲23旱 去聲28翰 入聲12曷',
  '上平聲26桓 上聲24緩 去聲29換 入聲13末',
  '上平聲27刪 上聲25潸 去聲30諫 入聲15鎋',
  '上平聲28山 上聲26產 去聲31襇 入聲14黠',
  '下平聲1先 上聲27銑 去聲32霰 入聲16屑',
  '下平聲2仙 上聲28獮 去聲33線 入聲17薛',
  '下平聲3蕭 上聲29篠 去聲34嘯',
  '下平聲4宵 上聲30小 去聲35笑',
  '下平聲5肴 上聲31巧 去聲36效',
  '下平聲6豪 上聲32晧 去聲37号',
  '下平聲7歌 上聲33哿 去聲38箇',
  '下平聲8戈 上聲34果 去聲39過',
  '下平聲9麻 上聲35馬 去聲40禡',
  '下平聲10陽 上聲36養 去聲41漾 入聲18藥',
  '下平聲11唐 上聲37蕩 去聲42宕 入聲19鐸',
  '下平聲12庚 上聲38梗 去聲43映 入聲20陌',
  '下平聲13耕 上聲39耿 去聲44諍 入聲21麥',
  '下平聲14清 上聲40靜 去聲45勁 入聲22昔',
  '下平聲15青 上聲41迥 去聲46徑 入聲23錫',
  '下平聲16蒸 上聲42拯 去聲47證 入聲24職',
  '下平聲17登 上聲43等 去聲48嶝 入聲25德',
  '下平聲18尤 上聲44有 去聲49宥',
  '下平聲19侯 上聲45厚 去聲50候',
  '下平聲20幽 上聲46黝 去聲51幼',
  '下平聲21侵 上聲47寑 去聲52沁 入聲26緝',
  '下平聲22覃 上聲48感 去聲53勘 入聲27合',
  '下平聲23談 上聲49敢 去聲54闞 入聲28盍',
  '下平聲24鹽 上聲50琰 去聲55豔 入聲29葉',
  '下平聲25添 上聲51忝 去聲56㮇 入聲30怗',
  '下平聲26咸 上聲53豏 去聲58陷 入聲31洽',
  '下平聲27銜 上聲54檻 去聲59鑑 入聲32狎',
  '下平聲28嚴 上聲52儼 去聲57釅 入聲33業',
  '下平聲29凡 上聲55范 去聲60梵 入聲34乏',
].flatMap(廣韻韻目s => 廣韻韻目s.split(' ')).map(廣韻韻目 => [廣韻韻目.slice(-1), 廣韻韻目]));

const 廣韻韻目字to平水韻目 = Object.fromEntries(Object.entries({
  '上平1東': '東',
  '上平2冬': '冬鍾',
  '上平3江': '江',
  '上平4支': '支脂之',
  '上平5微': '微',
  '上平6魚': '魚',
  '上平7虞': '虞模',
  '上平8齊': '齊',
  '上平9佳': '佳皆',
  '上平10灰': '灰咍',
  '上平11眞': '眞諄臻',
  '上平12文': '文欣',
  '上平13元': '元魂痕',
  '上平14寒': '寒桓',
  '上平15刪': '刪山',
  '下平1先': '先仙',
  '下平2蕭': '蕭宵',
  '下平3肴': '肴',
  '下平4豪': '豪',
  '下平5歌': '歌戈',
  '下平6麻': '麻',
  '下平7陽': '陽唐',
  '下平8庚': '庚耕清',
  '下平9青': '青',
  '下平10蒸': '蒸登',
  '下平11尤': '尤侯幽',
  '下平12侵': '侵',
  '下平13覃': '覃談',
  '下平14鹽': '鹽添嚴',
  '下平15咸': '咸銜凡',
  '上声1董': '董',
  '上声2腫': '湩腫',
  '上声3講': '講',
  '上声4紙': '紙旨止',
  '上声5尾': '尾',
  '上声6語': '語',
  '上声7麌': '麌姥',
  '上声8薺': '薺',
  '上声9蟹': '蟹駭',
  '上声10賄': '賄海',
  '上声11軫': '軫準齔',
  '上声12吻': '吻隱',
  '上声13阮': '阮混很',
  '上声14旱': '旱緩',
  '上声15潸': '潸產',
  '上声16銑': '銑獮',
  '上声17篠': '篠小',
  '上声18巧': '巧',
  '上声19皓': '晧', // 廣韻作晧，但平水韻一般作皓
  '上声20哿': '哿果',
  '上声21馬': '馬',
  '上声22養': '養蕩',
  '上声23梗': '梗耿靜',
  '上声24迥': '迥拯等',
  '上声25有': '有厚黝',
  '上声26寢': '寑', // 廣韻作寑，但平水韻一般作寢
  '上声27感': '感敢',
  '上声28琰': '琰忝儼',
  '上声29豏': '豏檻范',
  '去声1送': '送',
  '去声2宋': '宋用',
  '去声3絳': '絳',
  '去声4寘': '寘至志',
  '去声5未': '未',
  '去声6御': '御',
  '去声7遇': '遇暮',
  '去声8霽': '霽祭',
  '去声9泰': '泰',
  '去声10卦': '卦怪夬',
  '去声11隊': '隊代廢',
  '去声12震': '震稕櫬',
  '去声13問': '問焮',
  '去声14願': '願慁恨',
  '去声15翰': '翰換',
  '去声16諫': '諫襇',
  '去声17霰': '霰線',
  '去声18嘯': '嘯笑',
  '去声19效': '效',
  '去声20號': '号', // 廣韻作号，但平水韻一般作號
  '去声21箇': '箇過',
  '去声22禡': '禡',
  '去声23漾': '漾宕',
  '去声24敬': '映諍勁', // 廣韻韻目爲映，但平水韻韻目爲敬
  '去声25徑': '徑證嶝',
  '去声26宥': '宥候幼',
  '去声27沁': '沁',
  '去声28勘': '勘闞',
  '去声29豔': '豔㮇釅',
  '去声30陷': '陷鑑梵',
  '入声1屋': '屋',
  '入声2沃': '沃燭',
  '入声3覺': '覺',
  '入声4質': '質術櫛',
  '入声5物': '物迄',
  '入声6月': '月沒麧',
  '入声7曷': '曷末',
  '入声8黠': '黠鎋',
  '入声9屑': '屑薛',
  '入声10藥': '藥鐸',
  '入声11陌': '陌麥昔',
  '入声12錫': '錫',
  '入声13職': '職德',
  '入声14緝': '緝',
  '入声15合': '合盍',
  '入声16葉': '葉怗業',
  '入声17洽': '洽狎乏',
}).flatMap(([平水韻目, 廣韻韻目字s]) => [...廣韻韻目字s].map(廣韻韻目字 => [廣韻韻目字, 平水韻目])));

const 音韻地位patch = Object.fromEntries([
  ['400', '滂三C尤上'],
  ['1830', '並三A宵平'],
  ['2767c', '澄開三仙入'],
  ['3062', '清合一灰平'],
  ['3670', '章合三清入'],
].map(([小韻號, 描述]) => [小韻號, TshetUinh.音韻地位.from描述(描述)]));

const 反切patch = {
  133: '姊宜⦉規⦊',
  138: '子⦅足⦆⟨之⟩垂',
  157: '式之(脂)',
  179: '叉⟨尺⟩隹',
  209: '丘之⟨乏⟩',
  236: '所菹',
  353: '乙皆(乖)',
  357: '諧⟨諾⟩皆',
  399: '昌來⟨求⟩',
  400: '普才⦅來⦆⟨求⟩',
  401: '側(職)鄰',
  409: '下珍⟨殄⟩',
  463: '府(撫)文',
  500: '普魂',
  569: '力頑⟨規⟩',
  646: '丁全⟨兮⟩',
  1032: '千侯⟨隹⟩',
  1040: '子幽⟨絲⟩',
  1041: '山幽⟨函⟩',
  1097: '昨⟨作⟩三',
  1155: '符咸(䒦)',
  1191: '職⦉且⦊勇',
  '1307a': '初紀⦅己⦆⟨乙⟩',
  '1307b': '初紀⦅史⦆⟨夬⟩',
  1313: '袪豨',
  1314: '居豨',
  1420: '丈⟨?⟩夥⟨黠⟩',
  1422: '花⟨?⟩夥⟨黠⟩',
  '1423a': '求⟨?⟩蟹',
  '1423b': '求⟨乖⟩蟹',
  1478: '士⟨于⟩忍',
  1487: '而允⟨兖⟩',
  1574: '辝纂⦅短⦆⟨矩⟩',
  1625: '士⟨七⟩演',
  1659: '被⟨披⟩免',
  '1692a': '以沼⦅小⦆⟨水⟩',
  1830: '毗養⦅兩⦆⟨霄⟩',
  1865: '莫幸(杏)',
  1873: '呼⟨乎⟩䁝',
  1986: '式任⟨荏⟩',
  2004: '士⦅仕⦆⟨丘⟩㾕',
  2060: '兼⦅居⦆玷⦅點⦆⟨黝⟩',
  2062: '魯⟨魚⟩掩⟨埯⟩',
  2109: '子⟨千⟩仲',
  2284: '扶涕⟨沸⟩',
  2295: '近⟨丘⟩倨',
  2340: '思句⦅具⦆⟨典⟩',
  2360: '臧𧙓⟨祚⟩',
  2381: '丑戾⟨居⟩',
  2464: '七⟨士⟩懈',
  2490: '他⟨迍⟩怪',
  2491: '古賣(邁)',
  2507: '豺夬',
  2534: '苦蓋(愛)',
  2537: '胡槩',
  2545: '方⟨芳⟩廢',
  2561: '徐(疾)刃',
  2607: '芳⦅反⦆⟨叉⟩万',
  2648: '祖⟨徂⟩贊',
  2662: '博慢⟨漫⟩',
  2741: '七⟨士⟩戀',
  2750: '于⟨予⟩線',
  '2767a': '火弔⟨即⟩',
  '2767c': '火⟨丈⟩弔⦅叫⦆⟨列⟩',
  2807: '七⟨士⟩稍',
  2817: '博秏',
  2911: '于⟨子⟩亮',
  '2991a': '許⦅火⦆令⟨含⟩',
  3062: '七溜⦅霤⦆⟨雷⟩',
  3067: '[徒]候',
  3167: '尼𧸖',
  3313: '美畢(筆)',
  3352: '居乙⟨乞⟩',
  3406: '矛⟨予⟩割',
  3442: '五骨⟨滑⟩',
  3501: '丘謁⟨竭⟩',
  3534: '姝⟨殊⟩雪',
  3535: '廁列⟨別⟩',
  3539: '土⟨士⟩列',
  3645: '簪⦅子⦆⟨于⟩摑',
  3671: '七⟨火⟩役',
  3791: '士⟨七⟩合',
  3795: '都搕⟨榼⟩',
  3845: '七⟨士⟩洽',
  3854: '五夾⦅洽⦆⟨冷⟩',
  // Extended:
  597: '崇⟨?⟩玄⟨?⟩',
  1763: '作⦅子⦆⟨千⟩可',
  3670: '之⦅志⦆⟨?⟩役',
};

const propsRimeToDelete = Object.fromEntries([
  ['597', '章開三陽入'], // 𤜼
  ['646', '端開四齊平'], // 𡰝
  ['2021', '書開三鹽上'], // 㶒
  ['3373', '透合一魂入'], // 𣅝
].map(([小韻號, 描述]) => [小韻號, TshetUinh.音韻地位.from描述(描述)]));

const propsRime直音 = {
  1919: '音蒸上聲', // 拯
  3177: '音黯去聲', // 𪒠
};

const charInsertionsAfter = {
  // TODO: more unencoded chars in 廣韻字音表
  𣤇: ['⿰隺犬', '至也高也'], // 3276 㱿
  桼: ['⿳艹大雨', '俗（膠桼說文曰木汁可以䰍物从木象形桼如水滴而下也經典通用漆）'], // 3291 七
};
